C51 COMPILER V9.06   ULTRASONIC_LCD                                                        03/24/2015 00:49:10 PAGE 1   


C51 COMPILER V9.06, COMPILATION OF MODULE ULTRASONIC_LCD
OBJECT MODULE PLACED IN Ultrasonic_LCD.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Ultrasonic_LCD.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg51.h>
   2          #include <intrins.h>
   3          #include "delay.h"
   4          #include "lcd.h"
   5          
   6          
   7          unsigned int getDistance();
   8          
   9          sbit tri = P2^0;
  10          sbit echo = P2^1;
  11          
  12          
  13          
  14          unsigned int count = 0,cm = 0;
  15          
  16          
  17          
  18          void main()
  19          {
  20   1         lcdbegin();
  21   1         lcdclear();
  22   1         lcdprint("DISTANCE:-");
  23   1         delay(1000);
  24   1         while(1)
  25   1         {
  26   2                      cm = getDistance();
  27   2                      lcdsetCursor(10,0);
  28   2                  lcdwrite(cm);
  29   2                      lcdsetCursor(13,0);
  30   2                      lcdprint("cms");
  31   2                      delay(600);
  32   2                      count = 0;
  33   2              }               
  34   1         
  35   1         
  36   1      
  37   1      }
  38          
  39          unsigned int getDistance()
  40          {
  41   1              tri = 0;
  42   1         echo = 1;
  43   1      
  44   1         TMOD = 0x21;
  45   1         TH1 = 209;
  46   1         TL1 = 209;
  47   1      
  48   1              tri = 0;
  49   1              _nop_ ();
  50   1              while(1)
  51   1              {
  52   2                      tri = 1;
  53   2                      _nop_ ();
  54   2                      _nop_ ();
  55   2                      _nop_ ();
C51 COMPILER V9.06   ULTRASONIC_LCD                                                        03/24/2015 00:49:10 PAGE 2   

  56   2                      _nop_ ();
  57   2                      _nop_ ();
  58   2                      _nop_ ();
  59   2                      _nop_ ();
  60   2                      _nop_ ();
  61   2                      _nop_ ();
  62   2                      _nop_ ();
  63   2                      tri = 0;
  64   2      
  65   2                      echo = 1;
  66   2                      while(echo == 0);
  67   2      again:
  68   2                      TR1 = 1;
  69   2                      while(TF1 == 0);
  70   2                      TR1 = 0;
  71   2                      TF1 = 0;
  72   2                      count++;
  73   2                      if(echo == 1)
  74   2                      {
  75   3                              goto again;
  76   3                      }
  77   2      
  78   2                      else
  79   2                      {
  80   3                              return count;
  81   3                      }
  82   2       }
  83   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    135    ----
   CONSTANT SIZE    =     15    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
